<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="index.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Audiowide&family=Londrina+Solid:wght@100;300;400;900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Audiowide&family=Coda:wght@400;800&family=Londrina+Solid:wght@100;300;400;900&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
</head>

<body>
    <!-- Create a div to hold the map -->
    <div id="map"></div>
    <div class="overlay">
        <div>
            <nav class="col-md-12 navbar navbar-expand-lg">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse centered-navbar" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="data/andi_cv.pdf" download="cv_andi_surya_alam.pdf">CV</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://suryaalam12.github.io/sertifikat/index.html"
                                target="_blank">Sertifikat</a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="">
                <div class="profil">
                    <h1 class="text-center mt-3">Portofolio Pekerjaan</h1>
                    <div class="beetwen">
                        <div class="mapGIS">
                            <div>
                                <h3 class="nama">Andi Surya Alam</h3>
                                <div>
                                    <img class="pp" src="data/ava.png" alt="Avatar">
                                    <div class="bio">
                                        <h5>Sistem Infomasi Geografis</h5>
                                        <h6>WebGIS Developer</h6>
                                        <div class="keterangan">
                                            <a class="link" style="text-decoration:none;"
                                                href="https://suryaalam12.github.io/spatial-playground/"><span>SPATIAL
                                                    PLAYGROUND</span></a>
                                            <p>Menjadikan peta tampil dinamis dengan fitur analisis geometri serta
                                                visualisasi data yang representatif, termasuk simbologi data, analisis
                                                tabel, dan editor geometri. Ini merupakan rangkuman dari fitur-fitur
                                                analisis data spasial yang
                                                pernah saya buat</p>
                                            <h6 style="margin-top:10px;">Link: <a class="link"
                                                    style="text-decoration:none;" href="https://suryaalam12.github.io/spatial-playground/"><span>SPATIAL
                                                        PLAYGROUND</span></a></h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="BAJINGAN">
                            <div id="mapProfile"></div>
                            <div class="diagramPie">
                                <canvas id="myChartPie"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="batas clickable" id="contentHeader" title="Klik Selengkapnya" data-target-page="project1.html">
                <h5 class="mt-3">
                    Mengembangkan WebGIS dengan Fitur CRUD untuk Pendataan Massal PBB
                </h5>
                <p class="mt-3">
                    Dalam project ini saya berperan sebagai pembuat fitur CRUD dengan
                    menggunakan Ajax sebagai penghubung data dari tampilan UI ke
                    database dengan plugin PostGIS dan Lealet.pm sebagai alat untuk
                    mengubah data geometri.
                </p>
                <h6>
                    <p>JavaScript, PHP, jQuery, Lealet.Js, AJAX, PostGIS</p>
                </h6>
                <div class="container" id="content" style="display:none;">
                    <div class=" batas">
                    </div>
                    <div class="konten">
                        <div id="content"></div>
                    </div>
                </div>
            </div>

            <div class="batas clickable" id="contentHeader2" title="Klik Selengkapnya" data-target-page="project2.html">
                <h5 class="mt-3">
                    Analisis Spasial Untuk Mengetahui Hubungan Overlay Antar Data
                </h5>
                <p class="mt-3">
                    Memanfaatkan plugin PostGIS dengan Query ST_Distance dan ST_DWithin
                    sebgai parameter untukk menentukan tabel data spasial yang akan
                    dioverlay pada tampilan WebGIS
                </p>
                <h6>
                    <p>JavaScript, PHP, jQuery, Lealet.Js, AJAX, PostGIS</p>
                </h6>
                <div class="container" id="content2" style="display:none;">
                    <div class=" batas">
                    </div>
                    <div class="konten">
                        <div id="content"></div>
                    </div>
                </div>
            </div>

            <div class="batas clickable" id="contentHeader3" title="Klik Selengkapnya" data-target-page="project3.html">
                <h5 class="mt-3">
                    Membuat Sistem Analisis Spasial Terintegrasi dengan PostgreSQL
                </h5>
                <p class="mt-3">
                    Membuat database yang dilengkapi dengan ekstensi PostGIS yang
                    mengubungkan data ke dalam server mmemperingkas waktu pengerjaan dan
                    data bisa ditampilkan dalam berbagai platform secara realtime
                </p>
                <h6>
                    <p>PostGIS, QGIS</p>
                </h6>
                <div class="container" id="content3" style="display:none;">
                    <div class=" batas">
                    </div>
                    <div class="konten">
                        <div id="content"></div>
                    </div>
                </div>
            </div>
            <div class="batas clickable" id="contentHeader4" title="Klik Selengkapnya" data-target-page="project4.html">
                <h5 class="mt-3">
                    Pembuatan Peta Zona ZNT dengan tampilan WebGIS dengan Plugin Q2web
                    pada QGIS
                </h5>
                <p class="mt-3">
                    Integrasi Penilaian Zona Nilai Tanah dan Data Shapefile Desa dalam
                    QGIS: Membuat Tampilan Representatif dengan Hover Text untuk
                    Pengaksesan Bersamaan Melalui Server
                </p>
                <h6>
                    <p>QGIS</p>
                </h6>
                <div class="container" id="content4" style="display:none;">
                    <div class=" batas">
                    </div>
                    <div class="konten">
                        <div id="content"></div>
                    </div>
                </div>
            </div>
            <div class="batas clickable" id="contentHeader5" title="Klik Selengkapnya" data-target-page="project5.html">
                <h5 class="mt-3">
                    Retifikasi Data MultiPolygon PBB Berdasarkan Citra Satelit
                </h5>
                <p class="mt-3">
                    Peningkatan Presisi dan Kualitas Data PBB: Konversi dan Koreksi 306
                    Bidang Objek dengan QGIS dan ArcGIS
                </p>
                <h6>
                    <p>Analisis GIS</p>
                </h6>
                <div class="container" id="content5" style="display:none;">
                    <div class=" batas">
                    </div>
                    <div class="konten">
                        <div id="content"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <footer class="warna">
                <h5>Hubungi Saya</h5>
                <a href="mailto:andalam2@gmail.com" target="_blank">
                    <i class="far fa-envelope"></i> Email
                </a>
                <a href="https://api.whatsapp.com/send?phone=6287887961807" target="_blank">
                    <i class="fab fa-whatsapp"></i> WhatsApp
                </a>
            </footer>
        </div>
    </div>
    </div>
</body>
<script>
    var layerPoint;
    $(document).ready(function () {
        $('#content').load('project1.html');
    });

    $(document).ready(function () {
        $('#content2').load('project2.html');
    });

    $(document).ready(function () {
        $('#content3').load('project3.html');
    });

    $(document).ready(function () {
        $('#content4').load('project4.html');
    });

    $(document).ready(function () {
        $('#content5').load('project5.html');
    });

    $('#contentHeader').click(function () {
        $('#content').slideToggle({
            duration: 1000
        });
    });

    $('#contentHeader2').click(function () {
        $('#content2').slideToggle({
            duration: 1000
        });
    });

    $('#contentHeader3').click(function () {
        $('#content3').slideToggle({
            duration: 1000
        });
    });

    $('#contentHeader4').click(function () {
        $('#content4').slideToggle({
            duration: 1000
        });
    });

    $('#contentHeader5').click(function () {
        $('#content5').slideToggle({
            duration: 1000
        });
    });

    $('.konten a').click(function (event) {
        event.stopPropagation(); 
    });

    var map = L.map('map').setView([-6.850397246062882, 112.640570703173172], 7);
    L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Portofolio Andi Surya Alam'
    }).addTo(map);

    var mapProfile = L.map('mapProfile').setView([-6.852397246062882, 112.6350703173172], 13);
    L.tileLayer('', {
        maxZoom: 19
    }).addTo(mapProfile);

    mapProfile.removeControl(mapProfile.zoomControl);

    refreshPoint();

    function returnEagleMarker(json, latlng) {
        var att = json.properties;
        var clrNest;
        if (att.jenis == "GIS") {
            clrNest = "blue";
        } else if (att.jenis == "JavaScript") {
            clrNest = "red";
        } else if (att.jenis == "PHP") {
            clrNest = "yellow";
        } else if (att.jenis == "jQuery") {
            clrNest = "purple";
        } else {
            clrNest = "chartreuse";
        }
        return L.circle(latlng, {
            radius: 200,
            color: clrNest,
            fillOpacity: 0.5,
        }).bindTooltip(att.jenis);
    }


    function refreshPoint() {
        $.getJSON('geojson/objek.geojson', function (data) {
            var layerPoint = L.geoJSON(data, {
                pointToLayer: returnEagleMarker
            }).addTo(mapProfile);
            diagramZNT(layerPoint, "jenis");
        });
    }

    function diagramZNT(layerPoint, jenis) {
        let counts = {};
        layerPoint.eachLayer(function (layer) {
            let value = layer.feature.properties[jenis];
            counts[value] = (counts[value] || 0) + 1;
        });

        let total = layerPoint.getLayers().length;
        let percentages = {};
        let labels = [];
        let data = [];

        for (let key in counts) {
            let percentage = Math.round((counts[key] / total) * 100 * 100) / 100;
            percentages[key] = percentage;
            labels.push(key);
            data.push(percentage);
            console.log(percentages);
        }

        const ctxPie = document.getElementById('myChartPie');
        new Chart(ctxPie, {
    type: 'doughnut',
    data: {
        labels: ['GIS', 'JavaScript', 'PHP', 'Others'], // Add labels here
        datasets: [{
            label: 'Presentase Point',
            data: data,
            borderWidth: 2,
            backgroundColor: function (context) {
                var label = context.chart.data.labels[context.dataIndex];
                switch (label) {
                    case "GIS":
                        return "rgba(0, 0, 255, 0.5)";
                    case "JavaScript":
                        return "rgba(255, 0, 0, 0.5)";
                    case "PHP":
                        return "rgba(255, 255, 0, 0.5)";
                    default:
                        return "rgba(128, 0, 128, 0.5)";
                }
            },
            borderColor: function (context) {
                var label = context.chart.data.labels[context.dataIndex];
                switch (label) {
                    case "GIS":
                        return "blue";
                    case "JavaScript":
                        return "red";
                    case "PHP":
                        return "yellow";
                    default:
                        return "purple";
                }
            },
        }]
    },
    options: {
        plugins: {
            legend: {
                position: 'bottom', // Place labels above the chart
            },
        },
    },
});
    }
</script>

</html>
